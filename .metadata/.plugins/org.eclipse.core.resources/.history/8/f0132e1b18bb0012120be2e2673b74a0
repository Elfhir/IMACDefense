package map;

import java.io.File;
import java.util.ArrayList;
import java.util.Iterator;

import org.jdom2.Element;
import org.jdom2.input.SAXBuilder;

public class XMLParser {
	
	static org.jdom2.Document document;
	static Element racine;

	public XMLParser(String filename) {
		// TODO Auto-generated constructor stub
		super();
		String workingDir = System.getProperty("user.dir");
		String finalfile = workingDir + File.separator + "data" + File.separator + filename;
		
		//On crée une instance de SAXBuilder
		SAXBuilder sxb = new SAXBuilder();
		try
		{
			//On crée un nouveau document JDOM avec en argument le fichier XML
			document = sxb.build(new File(finalfile));
		}
		catch(Exception e){e.printStackTrace();}
		finally
		{
			//On initialise un nouvel élément racine avec l'élément racine du document.
			racine = document.getRootElement();
		}
	}
	
	public void printALL()
	{
	   //On crée une List contenant tous les noeuds "etudiant" de l'Element racine
	   ArrayList<Element> listMap = (ArrayList<Element>) racine.getChildren("map");

	   //On crée un Iterator sur notre liste
	   Iterator<Element> i = listMap.iterator();
	   while(i.hasNext())
	   {
	      //On recrée l'Element courant à chaque tour de boucle afin de
	      //pouvoir utiliser les méthodes propres aux Element comme :
	      //sélectionner un nœud fils, modifier du texte, etc...
	      Element current = (Element)i.next();
	      //On affiche le nom de l’élément courant
	      System.out.println(current.getChild("nom").getText());
	   }
	}

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub

	}

}
