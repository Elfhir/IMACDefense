package map;

import java.util.ArrayList;
import java.util.Iterator;

public class Mapping {
	
	private String name = "";
	private int widthTiles = 20; // Largeur de la map en tiles
	private int heightTiles = 20; // Hauteur de la map en tiles
	private ArrayList<ArrayList<Tile>> tiles = new ArrayList<ArrayList<Tile>>();
	
	public Mapping ()
	{
		super ();
		initializeTiles();
	}

	public Mapping(String name, int widthTiles, int heightTiles) {
		// TODO Auto-generated constructor stub
		super();
		this.name = name;
		this.widthTiles = widthTiles;
		this.heightTiles = heightTiles;
		this.initializeTiles();
	}
	
	public void initializeTiles ()
	{
		int i = 0, j = 0;
		for (i = 0; i < this.widthTiles; ++i)
		{
			ArrayList<Tile> newLine = new ArrayList<Tile>();
			for (j = 0; j < this.heightTiles; ++j)
			{
				newLine.add(Tile.Field);
			}
			this.tiles.add(newLine);
		}
		return;
	}
	
	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public int getWidthTiles() {
		return widthTiles;
	}

	public void setWidthTiles(int widthTiles) {
		this.widthTiles = widthTiles;
	}

	public int getHeightTiles() {
		return heightTiles;
	}

	public void setHeightTiles(int heightTiles) {
		this.heightTiles = heightTiles;
	}

	public ArrayList<ArrayList<Tile>> getTiles() {
		return tiles;
	}

	public void setTiles(ArrayList<ArrayList<Tile>> tiles) {
		this.tiles = tiles;
	}

	public void readXMLFile (String filename)
	{
		XMLParser parser = new XMLParser (filename);
		this.name = parser.getMapName();
		this.widthTiles = Integer.parseInt(parser.getRacine().getAttributeValue("width"));
		this.heightTiles = Integer.parseInt(parser.getRacine().getAttributeValue("height"));
	}
	
	public void print ()
	{
		Iterator<ArrayList<Tile>> line = this.tiles.iterator();
		while(line.hasNext())
        {
			ArrayList<Tile> currentLine = (ArrayList<Tile>) line.next();
        	Iterator<Tile> column = currentLine.iterator();
        	while(column.hasNext())
        	{
        		Tile currentTile = (Tile) column.next();
        		currentTile.print();
        	}
        }
		return;
	}
	
	/**
	 * @param args
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Mapping map = new Mapping ();
		map.readXMLFile ("map1.xml");
		System.out.println(map.getName());
		System.out.println(map.getWidthTiles());
		System.out.println(map.getHeightTiles());
		map.print();
	}
}
